#!/usr/bin/env bash
# post-merge hook — Auto-bumps version on merges into develop (minor) or master (major)
# Install with: git config core.hooksPath .githooks

CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)
REPO_ROOT=$(git rev-parse --show-toplevel)

case "$CURRENT_BRANCH" in
    master|main)
        echo "[post-merge] Merge into $CURRENT_BRANCH detected → bumping MAJOR version"
        "$REPO_ROOT/scripts/bump-version.sh" major
        ;;
    develop)
        echo "[post-merge] Merge into develop detected → bumping MINOR version"
        "$REPO_ROOT/scripts/bump-version.sh" minor
        ;;
    *)
        # No auto-bump on feature branches
        ;;
esac
