<div #container class="image-wrapper">
  <div class="image-container" [class.real-size]="realSize">
    @if (isGenerating) {
      <div class="loading-state">
        <mat-spinner diameter="80"></mat-spinner>
      </div>
    } @else if (imageUrl) {
      <img [src]="imageUrl"
        [alt]="altText"
        class="preview-image">
    } @else {
      <div class="empty-state">
        <mat-spinner diameter="80" style="opacity: 0.3;"></mat-spinner>
        <p>{{ emptyMessage }}</p>
        <p>{{ emptyHint }}</p>
      </div>
    }
  </div>

  @if (imageUrl && !isGenerating) {
    <div class="image-controls">
      <button mat-icon-button
              (click)="toggleRealSize()"
              [matTooltip]="realSize ? 'Ajuster à la fenêtre' : 'Taille réelle (1:1)'">
        <mat-icon>{{ realSize ? 'close_fullscreen' : 'open_in_full' }}</mat-icon>
      </button>
      <button mat-icon-button
              (click)="toggleFullscreen()"
              [matTooltip]="isFullscreen ? 'Quitter le plein écran' : 'Plein écran'">
        <mat-icon>{{ isFullscreen ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>
      </button>
    </div>
  }
</div>
