<app-generator-shell
  generatorTabLabel="GÃ©nÃ©rateur"
  libraryTabLabel="BibliothÃ¨que de galaxies">

  <!-- Parameters panel content -->
  <ng-template #paramContent>
    <app-galaxy-param #galaxyParam></app-galaxy-param>
  </ng-template>

  <!-- Action bar content -->
  <ng-template #actionBarContent>
    <app-action-bar
      [buttons]="actionBarButtons"
      [isGenerating]="isGenerating"
      [summary]="getSummary()">
      @if (canRate()) {
        <div class="star-rating-container"
             matTooltip="Noter &amp; sauvegarder"
             matTooltipPosition="above">
          @for (star of starValues; track star) {
            <button mat-icon-button
                    (click)="onNoteSelected(star)"
                    type="button">
              <mat-icon [style.color]="star <= currentNote ? '#f59f00' : 'rgba(0,0,0,0.35)'">
                {{ star <= currentNote ? 'star' : 'star_border' }}
              </mat-icon>
            </button>
          }
        </div>
      }
    </app-action-bar>
  </ng-template>

  <!-- Image preview content -->
  <ng-template #imageContent>
    <app-galaxy-image
      [imageUrl]="generatedImageUrl"
      [isGenerating]="isGenerating">
    </app-galaxy-image>
  </ng-template>

  <!-- Renders strip content -->
  <ng-template #rendersContent>
    @if (renders().length) {
      <div class="renders-strip">
        <span class="renders-strip-title">
          ğŸ—‚ï¸ Rendus sauvegardÃ©s â€” ModÃ¨le de Base courant
          @if (canBuild()) {
            <span class="pending-dot" matTooltip="ParamÃ¨tres modifiÃ©s â€” gÃ©nÃ©ration disponible"></span>
          }
        </span>
        <div class="renders-list">
          @for (render of renders(); track render.id) {
            <div class="render-card" [class.selected]="render.id === selectedRenderId()" (click)="onSelectRender(render)">
              @if (render.thumbnail) {
                <img class="render-thumbnail"
                     [src]="'data:image/png;base64,' + render.thumbnail"
                     [alt]="render.description"
                     [matTooltip]="render.description" />
              }
              <div class="render-stars">
                @for (star of [1,2,3,4,5]; track star) {
                  <mat-icon [style.color]="star <= render.note ? '#f59f00' : 'rgba(0,0,0,0.35)'"
                            style="font-size:14px">
                    {{ star <= render.note ? 'star' : 'star_border' }}
                  </mat-icon>
                }
              </div>
              <button mat-icon-button (click)="onDeleteRender(render.id); $event.stopPropagation()"
                      matTooltip="Supprimer ce rendu" class="delete-render-btn">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          }
        </div>
      </div>
    }
  </ng-template>

  <!-- Library content -->
  <ng-template #libraryContent>
    <app-galaxy-history-list
      (viewRequested)="onViewRequested($event)"
      (renderSelected)="onHistoryRenderSelected($event)">
    </app-galaxy-history-list>
  </ng-template>

</app-generator-shell>
